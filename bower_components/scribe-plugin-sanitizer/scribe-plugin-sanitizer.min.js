!function(e,i){"function"==typeof define&&define.amd?define("html-janitor",i):e.amdWeb=i()}(this,function(){function e(e){this.config=e}function i(e){return-1!==n.indexOf(e.nodeName)}function t(e){return document.createTreeWalker(e,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT)}var n=["P","LI","DIV"];return e.prototype.clean=function(e){var i=document.createElement("div");return i.innerHTML=e,this._sanitize(i),i.innerHTML},e.prototype._sanitize=function(e){var n=t(e),r=n.firstChild();if(r)do{var o=r.nodeName.toLowerCase(),a=this.config.tags[o];if(!r._sanitized)if(r.nodeType!==Node.TEXT_NODE){if(r.nodeType===Node.COMMENT_NODE){e.removeChild(r),this._sanitize(e);break}var d,s="b"===o;s&&(d=Array.prototype.some.call(r.childNodes,i));var l=s&&d,f=!!e.parentNode,u=i(e)&&i(r)&&f;if(!this.config.tags[o]||l||u){if("SCRIPT"!==r.nodeName&&"STYLE"!==r.nodeName)for(;r.childNodes.length>0;)e.insertBefore(r.childNodes[0],r);e.removeChild(r),this._sanitize(e);break}for(var m=0;m<r.attributes.length;m+=1){var c=r.attributes[m],h=c.name.toLowerCase(),N=a[h],v=!N,b=N!==!0&&c.value!==N;(v||b)&&(r.removeAttribute(c.name),m-=1)}this._sanitize(r),r._sanitized=!0}else if(""===r.data.trim()&&(r.previousElementSibling&&i(r.previousElementSibling)||r.nextElementSibling&&i(r.nextElementSibling))){e.removeChild(r),this._sanitize(e);break}}while(r=n.nextSibling())},e}),define("scribe-plugin-sanitizer",["html-janitor"],function(e){return function(i){return function(t){var n=new e(i);t.htmlFormatter.formatters.push(n.clean.bind(n))}}});//# sourceMappingURL=scribe-plugin-sanitizer.min.js.map