{"version":3,"file":"scribe-plugin-intelligent-unlink-command.min.js","mappings":"AAAA,OAAA,8CAAA,WASA,MAAA,YACA,MAAA,UAAA,GACA,GAAA,GAAA,GAAA,GAAA,IAAA,QAAA,SAEA,GAAA,QAAA,WACA,GAAA,GAAA,GAAA,GAAA,IAAA,SAEA,GAAA,UAAA,YACA,EAAA,mBAAA,IAAA,WAKA,GAAA,GAAA,EAAA,cAAA,SAAA,GACA,MAAA,MAAA,EAAA,UAGA,IACA,GAAA,GAAA,IAAA,QAAA,EAAA,YAAA,OAAA,IAEA,KAAA,OAEA,EAAA,IAAA,QAAA,UAAA,QAAA,MAAA,KAAA,YAIA,EAAA,aAAA,WACA,GAAA,GAAA,GAAA,GAAA,IAAA,SACA,OAAA,GAAA,UAAA,cACA,EAAA,cAAA,SAAA,GACA,MAAA,MAAA,EAAA,WAGA,EAAA,IAAA,QAAA,UAAA,aAAA,MAAA,KAAA,YAIA,EAAA,SAAA,OAAA","sources":["../src/plugins/scribe-plugin-intelligent-unlink-command.js"],"sourcesContent":["define('scribe-plugin-intelligent-unlink-command',[],function () {\n\n  /**\n   * This plugin modifies the `unlink` command so that, when the user's\n   * selection is collapsed, remove the containing A.\n   */\n\n  'use strict';\n\n  return function () {\n    return function (scribe) {\n      var unlinkCommand = new scribe.api.Command('unlink');\n\n      unlinkCommand.execute = function () {\n        var selection = new scribe.api.Selection();\n\n        if (selection.selection.isCollapsed) {\n          scribe.transactionManager.run(function () {\n            /**\n             * If the selection is collapsed, we can remove the containing anchor.\n             */\n\n            var aNode = selection.getContaining(function (node) {\n              return node.nodeName === 'A';\n            });\n\n            if (aNode) {\n              new scribe.api.Element(aNode.parentNode).unwrap(aNode);\n            }\n          }.bind(this));\n        } else {\n          scribe.api.Command.prototype.execute.apply(this, arguments);\n        }\n      };\n\n      unlinkCommand.queryEnabled = function () {\n        var selection = new scribe.api.Selection();\n        if (selection.selection.isCollapsed) {\n          return !! selection.getContaining(function (node) {\n            return node.nodeName === 'A';\n          });\n        } else {\n          return scribe.api.Command.prototype.queryEnabled.apply(this, arguments);\n        }\n      };\n\n      scribe.commands.unlink = unlinkCommand;\n    };\n  };\n\n});\n\n"],"names":[]}